<div class="schedule-generator-container">
  <!-- Use shared navigation bar -->
  <app-student-navbar></app-student-navbar>

  <div class="content-wrapper">
    <div class="header">
      <h1>ğŸ“ AI Schedule Generator</h1>
      <p *ngIf="currentUser">Generate a personalized study schedule for {{ currentUser.firstName }} {{ currentUser.lastName }}</p>
    </div>

  <div class="alert alert-info">
    <strong>â„¹ï¸ Info:</strong> Upload your school timetable PDF and we'll automatically generate your revision schedule!
  </div>

  <form [formGroup]="scheduleForm" (ngSubmit)="onSubmit()" class="schedule-form">

    <!-- PDF Upload Section -->
    <div class="form-section">
      <h2>ï¿½ Upload School Timetable</h2>
      <p class="section-description">Upload your school's emploi du temps (PDF format)</p>

      <div class="upload-area" [class.has-file]="selectedFile">
        <input 
          type="file" 
          id="pdfFile"
          accept="application/pdf"
          (change)="onFileSelected($event)"
          #fileInput
          style="display: none;"
        />
        
        <label for="pdfFile" class="upload-label">
          <div *ngIf="!selectedFile" class="upload-placeholder">
            <span class="upload-icon">ğŸ“„</span>
            <p><strong>Click to upload</strong> or drag and drop</p>
            <p class="file-hint">PDF format only</p>
          </div>
          
          <div *ngIf="selectedFile" class="file-info">
            <span class="file-icon">âœ…</span>
            <div>
              <p class="file-name">{{ selectedFile.name }}</p>
              <p class="file-size">{{ formatFileSize(selectedFile.size) }}</p>
            </div>
            <button type="button" class="btn-remove-file" (click)="removeFile($event)">âŒ</button>
          </div>
        </label>
      </div>

      <small class="helper-text">
        ğŸ’¡ Your timetable will be scanned to extract subjects and weekly hours
      </small>
    </div>

    <!-- Alerts -->
    <div class="alert alert-error" *ngIf="error">
      <strong>âŒ Error:</strong> {{ error }}
    </div>

    <div class="alert alert-success" *ngIf="success">
      <strong>âœ… Success:</strong> {{ success }}
    </div>

    <!-- Actions -->
    <div class="form-actions">
      <button 
        type="submit" 
        class="btn btn-primary" 
        [disabled]="loading || !selectedFile"
      >
        <span *ngIf="!loading">ğŸ¤– Generate AI Schedule from PDF</span>
        <span *ngIf="loading">â³ Generating...</span>
      </button>

      <button 
        type="button" 
        class="btn btn-secondary" 
        (click)="resetForm()"
        [disabled]="loading"
      >
        ğŸ”„ Reset
      </button>
    </div>
  </form>
  </div>
</div>
